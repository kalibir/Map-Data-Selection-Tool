[{"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\index.js":"1","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\reportWebVitals.js":"2","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\App.js":"3","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\index.js":"4","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MainWrapper\\index.js":"5","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\reducers\\rootReducer.js":"6","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MainWrapper\\styles.js":"7","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\reducers\\featureReducer.js":"8","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MapTool\\index.js":"9","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\index.js":"10","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\action_types.js":"11","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MapTool\\styles.js":"12","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\styles.js":"13","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\variables.js":"14","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\actions\\addFeatureAction.js":"15"},{"size":637,"mtime":1631788481157,"results":"16","hashOfConfig":"17"},{"size":375,"mtime":1631788481157,"results":"18","hashOfConfig":"17"},{"size":126,"mtime":1631788481153,"results":"19","hashOfConfig":"17"},{"size":236,"mtime":1631788481160,"results":"20","hashOfConfig":"17"},{"size":1077,"mtime":1631788481155,"results":"21","hashOfConfig":"17"},{"size":166,"mtime":1631788481160,"results":"22","hashOfConfig":"17"},{"size":445,"mtime":1631788481155,"results":"23","hashOfConfig":"17"},{"size":799,"mtime":1631788481160,"results":"24","hashOfConfig":"17"},{"size":5795,"mtime":1631788970215,"results":"25","hashOfConfig":"17"},{"size":3047,"mtime":1631788963395,"results":"26","hashOfConfig":"17"},{"size":137,"mtime":1631788481158,"results":"27","hashOfConfig":"17"},{"size":152,"mtime":1631788481156,"results":"28","hashOfConfig":"17"},{"size":652,"mtime":1631788481154,"results":"29","hashOfConfig":"17"},{"size":73,"mtime":1631788481154,"results":"30","hashOfConfig":"17"},{"size":275,"mtime":1631788481159,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"ibv6nq",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\index.js",[],["66","67"],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\reportWebVitals.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\App.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\index.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MainWrapper\\index.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\reducers\\rootReducer.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MainWrapper\\styles.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\reducers\\featureReducer.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MapTool\\index.js",["68","69"],"import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useStyles } from \"./styles\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport MapboxDraw from \"@mapbox/mapbox-gl-draw\";\r\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\r\nimport * as turf from \"@turf/turf\";\r\nimport \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css\";\r\nimport \"@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css\";\r\nimport \"./map.css\";\r\nimport { addFeature } from \"../../store/actions/addFeatureAction\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { FaAngleDown, FaAngleUp } from \"react-icons/fa\";\r\n\r\nconst MapTool = ({ dispatch, features, mapViewport, bounds }) => {\r\n  mapboxgl.accessToken =\r\n    \"pk.eyJ1IjoidW5pdDAxIiwiYSI6ImNrZzB5Zmc4bzAzc2Uyem4xYTB6dmJnZWEifQ.HpNgy6VauOoxCBnK_2klpQ\";\r\n\r\n  const mapContainerRef = useRef(null);\r\n\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleShow = (e) => {\r\n    e.preventDefault();\r\n    setShow(!show);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let center = [mapViewport.lng, mapViewport.lat];\r\n    let initZoom = 4;\r\n    const map = new mapboxgl.Map({\r\n      container: mapContainerRef.current,\r\n      style: \"mapbox://styles/mapbox/satellite-v9\",\r\n      center:\r\n        features.length > 0\r\n          ? JSON.parse(localStorage.getItem(\"polyCenter\")).geometry.coordinates\r\n          : [mapViewport.lng, mapViewport.lat],\r\n      zoom: features.length > 0 ? 18 : 4,\r\n      maxBounds: bounds,\r\n      attributionControl: false,\r\n    });\r\n\r\n    const geocoder = new MapboxGeocoder({\r\n      accessToken: mapboxgl.accessToken,\r\n      mapboxgl: mapboxgl,\r\n    });\r\n    var Draw = new MapboxDraw({\r\n      displayControlsDefault: false,\r\n      controls: {\r\n        polygon: true,\r\n      },\r\n    });\r\n\r\n    map.addControl(Draw, \"top-right\");\r\n    map.addControl(geocoder, \"top-left\");\r\n\r\n    const updateArea = (e) => {\r\n      let data = Draw.getAll();\r\n\r\n      if (data.features.length > 0) {\r\n        if (e.type === \"draw.create\") {\r\n          let area = turf.area(data.features[data.features.length - 1]);\r\n\r\n          let roundArea = area.toFixed(2);\r\n          let newFeature = {\r\n            ...data.features[data.features.length - 1],\r\n            properties: {\r\n              area: roundArea,\r\n              label: \"New Selection\",\r\n              selected: false,\r\n            },\r\n          };\r\n\r\n          //use created feature to generate a polygon to find the center\r\n          let newPoly = turf.polygon([newFeature.geometry.coordinates[0]]);\r\n\r\n          //find center\r\n          let myCenter = turf.centroid(newPoly);\r\n          localStorage.setItem(\"polyCenter\", JSON.stringify(myCenter));\r\n          // NEW MAP CENTER FROM POLYGON STORED ON LOCAL STORAGE\r\n          center = JSON.parse(localStorage.getItem(\"polyCenter\")).geometry\r\n            .coordinates;\r\n          //NEW INITIAL ZOOM ON RE RENDER\r\n          initZoom = 12;\r\n          dispatch(addFeature(newFeature));\r\n        }\r\n      }\r\n    };\r\n\r\n    map.on(\"draw.create\", updateArea);\r\n    map.on(\"draw.delete\", updateArea);\r\n    map.on(\"draw.update\", updateArea);\r\n\r\n    //VARIABLE TO STORE THE FEATURES\r\n    var geojson = {\r\n      type: \"FeatureCollection\",\r\n      features: [...features],\r\n    };\r\n\r\n    map.on(\"load\", function () {\r\n      if (features.length > 0) {\r\n        geojson.features.forEach((feature, index) => {\r\n          // DEFINE BOUNDING BOX FOR EACH FEATURE\r\n          var bbox = turf.bbox(feature);\r\n\r\n          //ADD EACH FEATURE TO THE MAP\r\n          map.addSource(`jsonFile${index}`, {\r\n            type: \"geojson\",\r\n            data: feature,\r\n          });\r\n          map.addLayer({\r\n            id: `jsonFile${index}`,\r\n            type: \"fill\",\r\n            source: `jsonFile${index}`,\r\n            layout: {},\r\n\r\n            paint: {\r\n              \"fill-color\": \"#303F9F\",\r\n              \"fill-opacity\": 0.5,\r\n            },\r\n          });\r\n\r\n          // FIT MAP TO SELECTION\r\n          document\r\n            .getElementById(`fit-${index}`)\r\n            .addEventListener(\"click\", function () {\r\n              map.fitBounds(bbox, { padding: 20 });\r\n            });\r\n\r\n          // SELECT/DESELECT ON CLICK\r\n          map.on(\"click\", `jsonFile${index}`, function (e) {\r\n            feature.properties.selected = !feature.properties.selected;\r\n            map.setPaintProperty(\r\n              `jsonFile${index}`,\r\n              \"fill-color\",\r\n              feature.properties.selected ? \"#FD9812\" : \"#303F9F\"\r\n            );\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => map.remove();\r\n  }, [dispatch, features, bounds, mapViewport.lng, mapViewport.lat]);\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"map-container\"\r\n        style={{ height: \"100%\" }}\r\n        ref={mapContainerRef}\r\n      ></div>\r\n      {features.length > 0 ? (\r\n        <div\r\n          className=\"zoom-box\"\r\n          style={\r\n            features.length <= 3 && !show\r\n              ? { height: \"auto\" }\r\n              : features.length > 3 && show\r\n              ? { height: \"200px\" }\r\n              : null\r\n          }\r\n        >\r\n          <Button color=\"primary\" onClick={handleShow}>\r\n            Zoom on selection {show ? <FaAngleUp /> : <FaAngleDown />}\r\n          </Button>\r\n          {features.map((feature, index) => {\r\n            return (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                id={`fit-${index}`}\r\n                key={index}\r\n                className={classes.zoom}\r\n                style={show ? { display: \"block\" } : { display: \"none\" }}\r\n              >\r\n                {feature.properties.label}\r\n              </Button>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MapTool;\r\n","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\index.js",["70","71"],"import React, { useState } from \"react\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { addFeature } from \"../../store/actions/addFeatureAction\";\r\nimport ReactFileReader from \"react-file-reader\";\r\nimport { useStyles } from \"./styles\";\r\nimport { labels } from \"./variables\";\r\n\r\nconst LeftMenu = ({ dispatch, features, mapViewport }) => {\r\n  const classes = useStyles();\r\n  // SET DATA FOR DOWNLOAD FILE\r\n  const downloadData =\r\n    \"text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(features));\r\n\r\n  const [uploaded, setUploaded] = useState({\r\n    data: null,\r\n  });\r\n\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const handleNameChange = (e, feature) => {\r\n    e.preventDefault();\r\n    feature.properties.label = e.target.value;\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleUpload = (files) => {\r\n    var reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      // Use reader.result\r\n      setUploaded({\r\n        data: reader.result,\r\n      });\r\n      const fileObjs = JSON.parse(e.currentTarget.result);\r\n      fileObjs.forEach((obj) => {\r\n        dispatch(addFeature(obj));\r\n      });\r\n    };\r\n    reader.readAsText(files[0]);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h2>Selections:</h2>\r\n      <div style={{ display: \"flex\" }}>\r\n        {features.length > 0 ? (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            href={`data: + ${downloadData}`}\r\n            download=\"data.json\"\r\n            style={{\r\n              marginRight: \"8px\",\r\n            }}\r\n          >\r\n            download JSON\r\n          </Button>\r\n        ) : null}\r\n        <ReactFileReader\r\n          multipleFiles={false}\r\n          fileTypes={[\".json\"]}\r\n          handleFiles={handleUpload}\r\n        >\r\n          <Button variant=\"contained\" color=\"primary\">\r\n            upload JSON\r\n          </Button>\r\n        </ReactFileReader>\r\n      </div>\r\n      {features.map((paper, index) => {\r\n        return (\r\n          <Paper elevation={1} className={classes.paper} key={index}>\r\n            <form className={classes.formControl}>\r\n              <InputLabel htmlFor=\"selection-label\">\r\n                {paper.properties.label}\r\n              </InputLabel>\r\n              <Select\r\n                native\r\n                onChange={(e) => handleNameChange(e, paper)}\r\n                inputProps={{\r\n                  name: \"label\",\r\n                  id: \"selection-label\",\r\n                }}\r\n                className={classes.formControl}\r\n              >\r\n                {labels.map((label, index) => {\r\n                  return <option value={label}>{label}</option>;\r\n                })}\r\n              </Select>\r\n            </form>\r\n            <div style={{ marginBottom: \"8px\" }}>\r\n              Area: {paper.properties.area} m2\r\n            </div>\r\n          </Paper>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LeftMenu;\r\n","C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\action_types.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\MapTool\\styles.js",[],["72","73"],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\styles.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\components\\LeftMenu\\variables.js",[],"C:\\Users\\logo_\\Desktop\\Map-Data-Selection-Tool\\src\\store\\actions\\addFeatureAction.js",[],{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"78","severity":1,"message":"79","line":80,"column":11,"nodeType":"80","messageId":"81","endLine":80,"endColumn":17},{"ruleId":"78","severity":1,"message":"82","line":83,"column":11,"nodeType":"80","messageId":"81","endLine":83,"endColumn":19},{"ruleId":"78","severity":1,"message":"83","line":17,"column":10,"nodeType":"80","messageId":"81","endLine":17,"endColumn":18},{"ruleId":"78","severity":1,"message":"84","line":21,"column":10,"nodeType":"80","messageId":"81","endLine":21,"endColumn":14},{"ruleId":"74","replacedBy":"85"},{"ruleId":"76","replacedBy":"86"},"no-native-reassign",["87"],"no-negated-in-lhs",["88"],"no-unused-vars","'center' is assigned a value but never used.","Identifier","unusedVar","'initZoom' is assigned a value but never used.","'uploaded' is assigned a value but never used.","'name' is assigned a value but never used.",["87"],["88"],"no-global-assign","no-unsafe-negation"]